/*
@pymod expr_parse

@lexdef
!whitespace : \\s

' := CHAR
" := STRING

ADD := +
SUB := -
MUL := *
DIV := /

FLOAT_LIT : [0-9]+\\.[0-9]+
INT_LIT : [0-9]+

@endlex

*/


toplevel ::= expr(c1). { p->push_root(p->mn("root"))->pb(c1)->l(c1->line); }

%left ADD SUB.
%left MUL DIV.

expr(e) ::= expr(c1) ADD(o) expr(c2).   { e = p->mn("+", {c1, c2})->l(o.line); }
expr(e) ::= expr(c1) SUB(o) expr(c2).   { e = p->mn("-", {c1, c2})->l(o.line); }
expr(e) ::= expr(c1) MUL(o) expr(c2).   { e = p->mn("*", {c1, c2})->l(o.line); }
expr(e) ::= expr(c1) DIV(o) expr(c2).   { e = p->mn("/", {c1, c2})->l(o.line); }

expr(e) ::= FLOAT_LIT(c1).              { e = p->mn(c1); }
expr(e) ::= INT_LIT(c1).                { e = p->mn(c1); }

expr(e) ::= CHAR(c1).                   { e = p->mn(c1); }
expr(e) ::= STRING(c1).                 { e = p->mn(c1); }
